const defaultValues={country:"India",tag:"GoKwik",channel:"web",currency:"INR",countryCode:"+91"};let commonAnalyticsData$2,moengageGKCart,merchantInfoObj;const createBodyMoengage=(data={})=>{const{products:products,pidArr:pidArr,productNameArray:productNameArray,currency:currency,coupon:coupon="",cartAfterDiscount:cartAfterDiscount,imgUrlArr:imgUrlArr,marketingData:marketingData}=commonAnalyticsData$2,{platform:platform=defaultValues.channel}=merchantInfoObj;return{...{Tag:defaultValues.tag,Products:products,"Product ID":pidArr,"Product Name":productNameArray,"Product Quantity":products.map(a=>a["Product Quantity"]),"Product Variant ID":products.map(a=>a["Product Variant Id"]),"Variant ID":products.map(a=>a["Product Variant Id"]),"Variation ID":products.map(a=>a["Product Variant Id"]),"Product Price":products.map(a=>a["Product Price"]),"Image URL":imgUrlArr,"Product Url":products.map(a=>a["Product Url"]),"Vendor Name":null==moengageGKCart?void 0:moengageGKCart.items.map(item=>item.vendor),Currency:currency,"Promo Code":coupon,"Cart Total Price":cartAfterDiscount,channel:platform},...marketingData,...data}},moengageOtpLoginEvent=(eventName,{phone:phone,firstTimeUser:firstTimeUser,checkoutUrl:checkoutUrl})=>{let eventDetails={"Mobile Number":parseInt(phone),"Gokwik First Time User":firstTimeUser,Channel:defaultValues.tag};Moengage.track_event(eventName,eventDetails)},moengageStartedCheckoutEvent=data=>{let credentials={eventName:"Started_Checkout_GK",data:createBodyMoengage()};Moengage.track_event(credentials.eventName,credentials.data)},moengageMobileAddedEvent=({phone:phone})=>{let credentials={eventName:"Mobile_Added_GK",data:{"Mobile Number":phone,...createBodyMoengage()}};Moengage.add_unique_user_id(phone),Moengage.add_mobile(phone),Moengage.track_event(credentials.eventName,credentials.data)},moengageUserAddressEvent=data=>{const{phone:phone,firstName:firstName,lastName:lastName,email:email,address1:address1,city:city,state:state,pincode:pincode,shippingMethod:shippingMethod="",checkoutUrl:checkoutUrl=""}=data;let credentials={eventName:"Address_Selected_GK",data:{"Mobile Number":phone,"Full Name":`${firstName} ${lastName}`,Email:email,"Full Address":address1,City:city,State:state,Country:defaultValues.country,Region:city,"Shipping Method":shippingMethod,Pincode:pincode,...createBodyMoengage()}};addUserDetailsToMoengage({data:data,credentials:credentials})},moengageCreateUserAddressEvent=data=>{const{phone:phone,fullName:fullName,email:email,address1:address1,city:city,state:state,pincode:pincode,shippingMethod:shippingMethod=""}=data,[firstName,lastName]=fullName.split(" ").map(name=>name.trim());let credentials={eventName:"Address_Added_GK",data:{"Mobile Number":phone,"First Name":firstName,"Last Name":lastName,Email:email,"Address 1":address1,City:city,State:state,Region:city,Country:defaultValues.country,"Shipping Method":shippingMethod,Pincode:pincode,...createBodyMoengage()}};addUserDetailsToMoengage({data:data,credentials:credentials})},moengagePincodeAddedEvent=data=>{const{pincode:pincode,phone:phone,firstName:firstName,lastName:lastName,email:email,address1:address1,city:city,state:state,shippingMethod:shippingMethod=""}=data;let credentials={eventName:"PIN_Code_Added_GK",data:createBodyMoengage({Pincode:pincode,ZIP:pincode,"Mobile Number":phone,"First Name":firstName,"Last Name":lastName,Email:email,"Full Address":address1,City:city,State:state,Country:defaultValues.country,"Shipping Method":shippingMethod,Region:city})};Moengage.track_event(credentials.eventName,credentials.data)},addUserDetailsToMoengage=({data:data,credentials:credentials})=>{const{email:email,firstName:firstName,lastName:lastName,phone:phone}=data;Moengage.add_unique_user_id(null==email?void 0:email.toLowerCase()),Moengage.add_first_name(firstName),Moengage.add_last_name(lastName),Moengage.add_email(email),Moengage.add_mobile(phone),Moengage.add_user_name(`${firstName} ${lastName}`),Moengage.track_event(credentials.eventName,credentials.data)};let commonAnalyticsData$1;const createBody$1=data=>{const{currency:currency,coupon:coupon="",cartAfterDiscount:cartAfterDiscount,products:products,marketingData:marketingData}=commonAnalyticsData$1;return{Tag:defaultValues.tag,Currency:currency,"Promo Code":coupon,"Cart Total Price":+cartAfterDiscount,Products:products,...marketingData,...data}},createItemsBody$1=({items:items})=>items.map(item=>{var _a;const{productId:productId="",variantId:variantId,title:title="",quantity:quantity,url:url,image:image,finalPrice:finalPrice,discounts:discounts,productTitle:productTitle}=item;return{product_id:productId,product_variant_id:variantId,product_name:productTitle,product_variant:title,product_quantity:quantity,product_url:url,product_image_url:image,product_price:+finalPrice/100,coupon:(null==(_a=discounts[0])?void 0:_a.title)||""}}),createGkDataObj=(data={})=>{const{phone:phone="",cart:cart}=data;return{mobile_number:phone,currency:defaultValues.currency,tag:defaultValues.tag,cart_total_price:(parseInt((null==cart?void 0:cart.originalTotalPrice)||0)/100).toFixed(2),items:createItemsBody$1(cart)}},webengagePhoneNumberEntered=data=>{let gkDataObj=createGkDataObj(data);webengage.track("Mobile_Added_GK",gkDataObj)},webengageOtpVerifiedEvent=data=>{let gkDataObj=createGkDataObj(data);webengage.track("OTP_Verified_GK",gkDataObj)},webengageUserLoginEvent=({customerId:id=""})=>{webengage.user.login(id||"")},webengageCustomGKUserLoginEvent=data=>{let gkDataObj=createGkDataObj(data);webengage.track("User_Login_GK",gkDataObj)},webengagePhoneNumberEvent=data=>{var _a;let phone=null==(_a=null==data?void 0:data.phone)?void 0:_a.trim().toLowerCase();webengage.user.login(`${defaultValues.countryCode}${phone}`),phone&&webengage.user.setAttribute("we_phone",`${defaultValues.countryCode}${phone}`),webengage.user.setAttribute("userTag",defaultValues.tag),webengage.user.setAttribute("we_email_opt_in",!0),webengage.user.setAttribute("we_whatsapp_opt_in",!0),webengage.user.setAttribute("we_sms_opt_in",!0),(data=>{const{pidArr:pidArr,productNameArray:productNameArray,products:products,currency:currency,imgUrlArr:imgUrlArr,coupon:coupon="",cartTotalPrice:cartTotalPrice}=commonAnalyticsData$1,{phone:phone,checkoutUrl:checkoutUrl=""}=data;let credentials={eventName:"Mobile_Added_GK",data:createBody$1({"Mobile Number":defaultValues.countryCode+(null==phone?void 0:phone.trim()),"product ID":pidArr.join(","),"product Name":productNameArray.join(","),"Product Quantity":products.map(a=>a["Product Quantity"]),"Product Variant ID":products.map(a=>a["Product Variant Id"]),"Product Price":products.map(a=>a["Product Price"]),Currency:currency,"Image URL":imgUrlArr,"Product Url":products.map(a=>a["Product Url"]),"Promo Code":coupon,"Cart Total Price":+cartTotalPrice,"Product ID":pidArr,"Product Name":productNameArray,"Abandoned URL":checkoutUrl})};webengage.track(credentials.eventName,credentials.data)})(data)},webengageUserAddressEvent=data=>{const{eventName:eventName,firstName:firstName,lastName:lastName,email:email,address1:address1,city:city,state:state,pincode:pincode,shippingMethod:shippingMethod="",checkoutUrl:checkoutUrl="",phone:phone}=data,{requestId:requestId2,pidArr:pidArr,productNameArray:productNameArray}=commonAnalyticsData$1;let credentials={eventName:data.eventName,data:createBody$1({"First Name":firstName,"Last Name":lastName,Email:null==email?void 0:email.trim().toLowerCase(),"Full Address":address1,City:city,State:state,Pincode:"Address_Selected_GK"===data.eventName?""+pincode:+pincode,"Shipping Method":shippingMethod,"Abandoned URL":checkoutUrl,"Mobile Number":`${defaultValues.countryCode}${phone}`,"product ID":pidArr.join(","),"Product ID":pidArr,"product Name":productNameArray.join(","),"Product Name":productNameArray})};webengage.user.login(null==email?void 0:email.trim().toLowerCase()),webengage.user.setAttribute("we_email",null==email?void 0:email.trim().toLowerCase()),webengage.user.setAttribute("we_first_name",firstName),webengage.user.setAttribute("we_last_name",lastName),webengage.track(credentials.eventName,credentials.data)},webengagePinCodeEvent=pincode=>{let credentials={analyticsName:"webengage",eventName:"PIN_Code_Added_GK",data:createBody$1({Pincode:""+pincode})};webengage.track(credentials.eventName,credentials.data)};let commonAnalyticsData;const createBodyCleverTap=data=>{const{products:products,currency:currency,coupon:coupon="",cartAfterDiscount:cartAfterDiscount,marketingData:marketingData}=commonAnalyticsData;return{Tag:defaultValues.tag,Products:JSON.stringify(convertSpecificKeysToStrings(products)),Currency:currency,"Promo Code":coupon,"Cart Total Price":cartAfterDiscount,...marketingData,...data}},convertSpecificKeysToStrings=obj=>{const keysToConvert=["Product ID","Product Variant Id","product_id","variant_id","product id","variant id"];return Array.isArray(obj)?obj.map(item=>convertSpecificKeysToStrings(item)):null!==obj&&"object"==typeof obj?Object.fromEntries(Object.entries(obj).map(([key,value])=>keysToConvert.includes(key)&&"string"!=typeof value?[key,value.toString()]:[key,convertSpecificKeysToStrings(value)])):obj},clevertapCheckoutStartedEvent=data=>{const{products:products,currency:currency,coupon:coupon="",cartAfterDiscount:cartAfterDiscount,totalQuantity:totalQuantity,productNameArray:productNameArray,marketingData:marketingData}=commonAnalyticsData,{landing_page:landing_page="",orig_referrer:orig_referrer="",mkt_source:mkt_source="",mkt_medium:mkt_medium="",mkt_campaign:mkt_campaign="",mkt_term:mkt_term="",mkt_content:mkt_content=""}=marketingData;let dataObj={eventName:"Started_Checkout_GK",data:{Tag:defaultValues.tag,Products:JSON.stringify(products),Currency:currency,"Promo Code":coupon,Total:cartAfterDiscount,"Total Quantity":totalQuantity,"Products Name":productNameArray.join(","),"Landing Page":landing_page,"Origin Referrer":orig_referrer,"Utm Source":mkt_source,"Utm Medium":mkt_medium,"Utm Campaign":mkt_campaign,"Utm Term":mkt_term,"Utm Content":mkt_content}};clevertap.event.push(dataObj.eventName,dataObj.data)},clevertapPhoneNumberEvent=data=>{const phone=`${null==data?void 0:data.phone}`;let dataObj={type:"userLogin",data:{Site:{Phone:`${defaultValues.countryCode}${phone}`,"MSG-email":!0,"MSG-push":!0,"MSG-sms":!0,"MSG-whatsapp":!0,Identity:`91${phone}`}}};clevertap.onUserLogin.push(dataObj.data)},clevertapMobileAddedGKEvent=data=>{const{currency:currency,coupon:coupon="",cartAfterDiscount:cartAfterDiscount,totalQuantity:totalQuantity,productNameArray:productNameArray,marketingData:marketingData,products:products}=commonAnalyticsData,{landing_page:landing_page="",orig_referrer:orig_referrer="",mkt_source:mkt_source="",mkt_medium:mkt_medium="",mkt_campaign:mkt_campaign="",mkt_term:mkt_term="",mkt_content:mkt_content=""}=marketingData;let dataObj={eventName:"Mobile_Added_GK",data:{Tag:defaultValues.tag,Products:JSON.stringify(convertSpecificKeysToStrings(products)),Phone:`${defaultValues.countryCode}${null==data?void 0:data.phone}`,Currency:currency,"Promo Code":coupon,Total:cartAfterDiscount,Address:"","Total Quantity":totalQuantity,Email:"","Products Name":productNameArray.join(","),"Landing Page":landing_page,"Origin Referrer":orig_referrer,"Utm Source":mkt_source,"Utm Medium":mkt_medium,"Utm Campaign":mkt_campaign,"Utm Term":mkt_term,"Utm Content":mkt_content,"Abandoned URL":(null==data?void 0:data.checkoutUrl)||""}};clevertap.event.push(dataObj.eventName,dataObj.data)},clevertapPinCodeEvent=data=>{let dataObj={eventName:"PIN_Code_Added_GK",data:createBodyCleverTap({Pincode:null==data?void 0:data.pincode})};clevertap.event.push(dataObj.eventName,dataObj.data)},clevertapUserAddressEvent=data=>{const{address1:address1,firstName:firstName,lastName:lastName,email:email,phone:phone,city:city,state:state,pincode:pincode,shippingMethod:shippingMethod="",checkoutUrl:checkoutUrl=""}=data;let ctObj={type:"userLogin",data:{Site:{Name:`${firstName} ${lastName}`,Phone:`${defaultValues.countryCode}${phone}`,Identity:"",Email:email,"MSG-email":!0,"MSG-push":!0,"MSG-sms":!0,"MSG-whatsapp":!0}}};clevertap.onUserLogin.push(ctObj.data);let dataObj={eventName:data.eventName,data:createBodyCleverTap({"Mobile Number":`${defaultValues.countryCode}${phone}`,"First Name":firstName,"Last Name":lastName,Email:email,"Full Address":address1,City:city,State:state,Pincode:pincode,"Shipping Method":shippingMethod,"Abandoned URL":checkoutUrl})};clevertap.event.push(dataObj.eventName,dataObj.data)};var define_import_meta_env_default={VITE_SHOPIFY_CHECKOUT_ENHANCER_FRONTEND:"https://pdp.gokwik.co",VITE_SHOPIFY_CHECKOUT_ENHANCER_BACKEND:"https://prod-shp-checkout.gokwik.co",VITE_KWIK_SESSION_TOKEN_KEY:"KWIKSESSIONTOKEN",VITE_HITS_BACKEND:"https://hits.gokwik.co",VITE_TRUE_CALLER_PARTNER_KEY:"8mf4fc98b53b622d94edc87c225d6096325f8",VITE_KWIK_PREVIOUS_MERCHANT_KEY:"KWIKPREVIOUSMERCHANT",VITE_ENV:"PROD",VITE_SHOPIFY_CHECKOUT_1_0_BACKEND:"https://gkx.gokwik.co",VITE_COOKIE_DOMAIN:"pdp.gokwik.co",VITE_STALE_KWIK_SESSION_TOKENS:"pdp.gokwik.co,.pdp.gokwik.co",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let gk_checkout_enhancer_cart,gkIframe,requestId,gkExpCustomerId,gkModal=document.getElementById("gk-modal"),gkFailSafe=!1,gkNativeRedirection=!1,gKuserExperiments=[],gkVariant={},gkCss="",gkABTestingEnabled="",skipCheckoutNoToken=!1;async function gkInit(){if(gk_checkout_enhancer_cart=await fetchGkCart(),gkABTestingEnabled=null==window?void 0:window.gkABTestingEnabled,"true"===gkABTestingEnabled){const assignedAbVariant=sessionStorage.getItem("assignedGkVariant");if(gkGetUrlData(),assignedAbVariant){let gkFetchedUserId=localStorage.getItem("gk_user_id");gkDecideFun(assignedAbVariant,gkFetchedUserId),updateExperimentAttributes(gkFetchedUserId,assignedAbVariant,window.gkMerchantId)}else await async function(){localStorage.getItem("gk_user_id")?gkExpCustomerId=localStorage.getItem("gk_user_id"):(gkExpCustomerId=Math.floor(1e15+9e15*Math.random()).toString(),localStorage.setItem("gk_user_id",gkExpCustomerId))}(),async function(){try{const urlWithParams=`${define_import_meta_env_default.AB_SERVICE_HOST+experimentsApiConfig.getExperiments}?merchant_id=${window.gkMerchantId}`,response=await fetch(urlWithParams,{method:"GET",headers:{"Content-Type":"application/json","x-gokwik-origin":window.location.origin}}),responseData=await response.json();gKuserExperiments=Object.values((null==responseData?void 0:responseData.data)||{})}catch(error){console.error(error)}await async function(expName){gkVariant=await async function(experimentName){const experiment=gKuserExperiments.find(exp=>(null==exp?void 0:exp.name)===experimentName);if(!experiment)return null;const{id:id}=experiment;if(!id)return null;if(experiment.is_deleted||experiment.is_concluded||new Date(experiment.start_date)>=new Date)return null;try{const response=await async function(experimentId){if(!gkExpCustomerId)return;const payload={experiment_id:experimentId,user_attributes:{m_id:window.gkMerchantId},user_id:String(gkExpCustomerId)};try{const response=await fetch(define_import_meta_env_default.AB_SERVICE_HOST+experimentsApiConfig.getVariants,{method:"POST",headers:{"Content-Type":"application/json","x-gokwik-origin":window.location.origin},body:JSON.stringify(payload)});return await response.json()}catch(error){console.error(error)}}(id);if(200==response.status_code){const userVariant=null==response?void 0:response.data;if(null==userVariant?void 0:userVariant.variant_name)return userVariant}}catch(err){console.error(err)}}(expName),gKuserExperiments.length&&updateExperimentAttributes(gkExpCustomerId,null==gkVariant?void 0:gkVariant.variant_name,window.gkMerchantId);switch((null==gkVariant?void 0:gkVariant.variant_name)??""){case experimentVariants.SHIPROCKET_CHECKOUT:gkDecideFun(experimentVariants.SHIPROCKET_CHECKOUT,null==gkVariant?void 0:gkVariant.user_id);break;case experimentVariants.KWIK_CHECKOUT:gkDecideFun(experimentVariants.KWIK_CHECKOUT,null==gkVariant?void 0:gkVariant.user_id);break;case experimentVariants.SHOPIFY_NATIVE_CHECKOUT:gkDecideFun(experimentVariants.SHOPIFY_NATIVE_CHECKOUT,null==gkVariant?void 0:gkVariant.user_id);break;case experimentVariants.GOKWIK_CHECKOUT_ONE:gkDecideFun(experimentVariants.GOKWIK_CHECKOUT_ONE,null==gkVariant?void 0:gkVariant.user_id)}sessionStorage.setItem("assignedGkVariant",(null==gkVariant?void 0:gkVariant.variant_name)??"")}("checkout_buttons_ab")}()}new PerformanceObserver(list=>{list.getEntries().forEach(entry=>{const isValidRequestType=["xmlhttprequest","fetch"].includes(entry.initiatorType),isCartChangeRequest=/\/cart\//.test(entry.name);isValidRequestType&&isCartChangeRequest&&fetch("/cart.js").then(res=>{res.json().then(cart=>{gk_checkout_enhancer_cart=cart}).catch(err=>console.log(err))}).catch(err=>console.log(err))})}).observe({entryTypes:["resource"]}),localStorage.getItem("__ui"),gkModal||createIframe(),window.addEventListener("message",onMessageGk,!1)}"complete"===document.readyState?gkInit():(window.onload=()=>{gkInit()},document.addEventListener("DOMContentLoaded",async()=>{"complete"===document.readyState&&gkInit()}),window.addEventListener("load",async()=>{gkInit()}));const gkGetUrlData=()=>{const gkMerchantUrl=new URL(window.location.href),searchParams=gkMerchantUrl.searchParams,adSource=window.location.href.split("?").length>1?window.location.href.split("?")[1]:"NA",trackingData={gkMktMedium:searchParams.get("utm_medium"),gkMktSource:searchParams.get("utm_source"),gkMktCampaign:searchParams.get("utm_campaign"),gkAdSource:adSource,gkLandingPage:gkMerchantUrl.origin};Object.entries(trackingData).forEach(([key,value])=>{null!=value&&sessionStorage.setItem(key,value)})};function createIframe(){const gkStyles=document.createElement("style");gkStyles.innerHTML=gkframeCss,document.head.appendChild(gkStyles),gkModal=document.getElementById("gk-modal")?document.getElementById("gk-modal"):document.createElement("div"),gkModal.innerHTML='\n    <div class="gk-modal-content" style="display: none;">\n        <img class="gk-loader-animation" height="100%" width="100%" src="https://pdp.gokwik.co/sa-login-ui/assets/checkout_loader_optimized.gif" alt="Popup Loader Animation" />\n        <iframe class="gk-login" id="gk-iframe" allowpaymentrequest allow="otp-credentials"></iframe>\n        <img style="display: none;" class="cart-summary-animation" height="100%" width="100%" src="https://pdp.gokwik.co/sa-login-ui/assets/optimised_cart_loader.gif" alt="Cart Loader Animation" />\n    </div>\n  ',gkModal.setAttribute("id","gk-modal"),gkModal.classList.add("gk-modal"),document.body.appendChild(gkModal)}let experimentsApiConfig={getVariants:"/v3/experiment/api/get_user_variant",getExperiments:"/v3/experiment/api/experiments"},experimentVariants={SHIPROCKET_CHECKOUT:"shiprocket-checkout-button",KWIK_CHECKOUT:"kwik-checkout-button",SHOPIFY_NATIVE_CHECKOUT:"shopify-native-checkout",GOKWIK_CHECKOUT_ONE:"gokwik-checkout-one"};function gkDecideFun(valuetodecide,assignedUserId){"shopify-native-checkout"===valuetodecide?(gkCss="\n\t\t.gokwik-buynow-btn {display:none;}\n\t\t.gokwik_checkout_btn_ab {display:none;}\n\t\t.shopify_native_checkout_btn {display:flex !important;}\n\t\t.shopify_native_buynow_btn {display:flex !important;}\n\t\t",observeAndAttachEvent([".shopify_native_checkout_btn",".shopify_native_buynow_btn"],valuetodecide,assignedUserId)):"kwik-checkout-button"===valuetodecide?(gkCss="\n\t\t.gokwik-buynow-btn {display:flex !important;}\n\t\t.gokwik_checkout_btn_ab {display:flex !important;}\n\t\t.shopify_native_checkout_btn {display:none !important;}\n\t\t.shopify_native_buynow_btn {display:none !important;}\n\t\t.gokwik_one_checkout_btn_ab {display:none !important;}\n\t\t.gokwik-one-buy-now {display:none !important;}\n\t\t",observeAndAttachEvent([".gokwik_checkout_btn_ab",".gokwik-buynow-btn"],valuetodecide,assignedUserId)):"gokwik-checkout-one"===valuetodecide&&(gkCss="\n\t\t.gokwik-buynow-btn {display:none;}\n\t\t.gokwik_checkout_btn_ab {display:none;}\n\t\t.gokwik_one_checkout_btn_ab {display:flex !important;}\n\t\t.gokwik-one-buy-now {display:flex !important;}\n\t\t",observeAndAttachEvent([".gokwik_one_checkout_btn_ab",".gokwik-one-buy-now"],valuetodecide,assignedUserId));const styleElement=document.createElement("style");styleElement.textContent=gkCss,document.head.appendChild(styleElement)}function observeAndAttachEvent(gokwikButtons,valuetodecide,assignedUserId){const observer=new MutationObserver(mutations=>{gokwikButtons.forEach(selector=>{const button=document.querySelector(selector);button&&!button.dataset.eventListenerAdded&&(button.addEventListener("click",()=>{!function(valuetodecide,assignedUserId){analyticsEvent({source:sessionStorage.getItem("gkAdSource"),utm_medium:sessionStorage.getItem("gkMktMedium"),utm_source:sessionStorage.getItem("gkMktSource"),utm_campaign:sessionStorage.getItem("gkMktCampaign"),gkLandingPage:sessionStorage.getItem("gkLandingPage"),orig_referrer:document.referrer?document.referrer:"NA",shopifySessionId:window.gkShopifySessionId,eventType:"buttonClick",merchantId:window.gkMerchantId,name:"ab_checkout_started",type:"event",data:{user_id:assignedUserId,variant_name:valuetodecide}})}(valuetodecide,assignedUserId),observer.disconnect()}),button.dataset.eventListenerAdded="true")})});observer.observe(document.body,{childList:!0,subtree:!0})}async function handlePageRestoration(){const storedSessionCartToken=getCartTokenFromSession();if(null==storedSessionCartToken?void 0:storedSessionCartToken.storedCartToken){const gkModal2=document.getElementsByClassName("gk-modal")[0];if(gkModal2){gkModal2.style.display="block";let gkCartSummaryAnimation=document.querySelector(".cart-summary-animation");gkCartSummaryAnimation&&gkCartSummaryAnimation&&(gkCartSummaryAnimation.style.display="none"),gkIframe&&(gkIframe.style.display="block"),gkModal2&&gkModal2.firstElementChild&&(gkModal2.firstElementChild.style.display="flex")}document.body.style.overflow="scroll";let iosSafari=checkIfSafari();iosSafari&&document.body.style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("overflow"),iosSafari&&document.getElementById("iOSViewPort")&&document.getElementById("iOSViewPort").remove(),await async function(){const currentPath=window.location.pathname,{storedCartToken:storedCartToken,savedPath:savedPath,skipCheckoutNoToken:skipCheckoutNoToken2}=getCartTokenFromSession();if(storedCartToken&&savedPath&&!skipCheckoutNoToken2&&storedCartToken&&savedPath){const waitForModal=async()=>new Promise(resolve=>{const interval=setInterval(()=>{const gkModal3=document.querySelector(".gk-modal");gkModal3&&(gkModal3.style.display="block",clearInterval(interval),resolve(gkModal3))},100)}),gkModal2=await waitForModal();let fetchedCart=await fetchGkCart();gkModal2.style.display="block";if(storedCartToken===(null==fetchedCart?void 0:fetchedCart.token)&&savedPath===currentPath){initiateLogin("true"===sessionStorage.getItem("gkHideIframe"))}else gkModal2.style.display="none"}gkModal.style.display="none",sessionStorage.removeItem("gkCartToken")}()}}function gkRemoveRestrictingStyles(){document.body.style.overflow="scroll";let iosSafari=checkIfSafari();iosSafari&&document.body.style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("overflow"),iosSafari&&document.getElementById("iOSViewPort")&&document.getElementById("iOSViewPort").remove()}function closeCheckoutPageIframe(gkCheckoutPageIframe){gkCheckoutPageIframe.src="about:blank",gkCheckoutPageIframe.remove()}function iFrameCleanup(hideCheckoutOnReturn){const currentPath=window.location.pathname,expiry=(new Date).getTime()+1296e6,cartData={token:(null==gk_checkout_enhancer_cart?void 0:gk_checkout_enhancer_cart.token)||"",savedPath:currentPath,expiry:expiry,skipCheckoutNoToken:skipCheckoutNoToken};let gkCheckoutPageIframe=document.querySelector(".checkout-page-iframe");gkCheckoutPageIframe&&closeCheckoutPageIframe(gkCheckoutPageIframe),gkIframe.style.display="none",document.querySelector(".cart-summary-animation").style.display="block",hideCheckoutOnReturn&&(setTimeout(()=>{let gkCartSummaryAnimation2=document.querySelector(".cart-summary-animation");gkCartSummaryAnimation2&&(gkCartSummaryAnimation2.style.display="none");let gkModal2=document.querySelector(".gk-modal");gkModal2&&(gkModal2.style.display="none")},4e3),function(hideCheckoutOnReturn){const gkCheckoutPageIframe=document.querySelector(".checkout-page-iframe");gkCheckoutPageIframe&&(gkCheckoutPageIframe.src="about:blank",gkCheckoutPageIframe.remove()),gkIframe&&(gkIframe.src="about:blank",gkIframe.remove()),gkModal&&!hideCheckoutOnReturn&&(gkModal.style.display="none"),gkRemoveRestrictingStyles()}(hideCheckoutOnReturn)),sessionStorage.setItem("gkCartToken",JSON.stringify(cartData)),setTimeout(async()=>{sessionStorage.getItem("hideCheckoutOnReturn")||await handlePageRestoration()},5e3)}function getCartTokenFromSession(){const cartData=sessionStorage.getItem("gkCartToken");if(!cartData)return null;const parsedCartData=JSON.parse(cartData);return(new Date).getTime()>(null==parsedCartData?void 0:parsedCartData.expiry)?(sessionStorage.removeItem("gkCartToken"),null):{storedCartToken:parsedCartData.token,savedPath:parsedCartData.savedPath,skipCheckoutNoToken:parsedCartData.skipCheckoutNoToken}}function getGkDiscountCode(){return["discount_code","coupon_applied","applied-coupons"].map(cname=>getGkCookie(cname)).find(value=>value)}async function fetchGkCart(){return new Promise((resolve,reject)=>{fetch("/cart.js",{method:"GET",headers:{"Content-Type":"application/json"}}).then(response=>response.json()).then(result=>{resolve(result)})})}window.addEventListener("pageshow",async event=>{sessionStorage.getItem("hideCheckoutOnReturn")||await handlePageRestoration()});const analyticsEvent=payload=>{try{const timestamp=Date.now(),userAgent=navigator.userAgent,data={...payload,timestamp:timestamp,requestId:requestId||"NA",userAgent:userAgent,version:"1"};fetch("https://hits.gokwik.co/api/v1/events",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(data)})}catch(err){console.log(err,"ANALYTICS ERR")}};function checkIfSafari(){const userAgent=window.navigator.userAgent;return(-1!==userAgent.indexOf("iPhone")||-1!==userAgent.indexOf("iPad")||-1!==userAgent.indexOf("iPod"))&&-1!==userAgent.indexOf("Safari")}async function callPostRequestApi(body,cart){var _a,_b,_c,_d,_e,_f,_g;const controller=new AbortController;let timeoutId;try{timeoutId=setTimeout(()=>{controller.abort()},5e3);const response=await fetch("https://prod-shp-checkout.gokwik.co/v3/login/request",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","x-shop-domain":window.gkShopDomain},body:JSON.stringify(body),signal:controller.signal});clearTimeout(timeoutId),200!==response.status&&(window.location.href="/checkout");const result=await response.json();if(null==(_a=null==result?void 0:result.data)?void 0:_a.requestId){if(requestId=null==(_b=null==result?void 0:result.data)?void 0:_b.requestId,(null==(_c=null==result?void 0:result.data)?void 0:_c.failsafe)||!(null==(_d=null==result?void 0:result.data)?void 0:_d.addressPrefill))return gkFailSafe=null==(_e=null==result?void 0:result.data)?void 0:_e.failsafe,gkNativeRedirection=!(null==(_f=null==result?void 0:result.data)?void 0:_f.addressPrefill),gkRemoveRestrictingStyles(),void(window.location.href=window.location.origin+"/checkout");let tokenRequestIdObj={requestId:null==(_g=null==result?void 0:result.data)?void 0:_g.requestId,cartToken:(null==cart?void 0:cart.token)||""};setGkCookie("gkCartTokenReqId",JSON.stringify(tokenRequestIdObj),15)}else window.location.href="/checkout"}catch(error){return timeoutId&&clearTimeout(timeoutId),void(window.location.href="/checkout")}}function gkDeleteCookie(name){document.cookie=`${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}async function initiateLogin(hideIframe=!1,skipRequest=!1){let checkoutClickTime=Date.now();const button=document.querySelector(".gokwik-checkout button");!function(button){button&&button.classList.add("checkout-btn-loader")}(button);let cart=gk_checkout_enhancer_cart;if(sessionStorage.setItem("gkHideIframe",hideIframe),cart=await fetchGkCart(),0===(null==cart?void 0:cart.items.length))return;(null==cart?void 0:cart.attributes)||(cart.attributes={}),cart.attributes={...cart.attributes,source:"shopify_apps"},gk_checkout_enhancer_cart=cart,cart.attributes.shopify_session_id=getShopifySessionId();const shopify_session_id=getShopifySessionId();!function(hideIframe=!1){hideIframe||(document.body.style.overflow="hidden");let iosSafari=checkIfSafari();iosSafari&&(document.body.style.height="100vh"),iosSafari&&(document.querySelector("html").style.height="100vh"),iosSafari&&(document.querySelector("html").style.overflow="hidden");let metaTag=document.createElement("meta");metaTag.name="viewport",metaTag.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no",iosSafari&&(metaTag.id="iOSViewPort"),document.getElementsByTagName("head")[0].appendChild(metaTag)}(hideIframe);let gkCartTokenReqId=function(){const cartDataCookie=getGkCookie("gkCartTokenReqId");if(!cartDataCookie)return null;try{return JSON.parse(cartDataCookie)}catch(error){return null}}();if(!skipRequest)if(gkCartTokenReqId&&(null==gkCartTokenReqId?void 0:gkCartTokenReqId.cartToken)===(null==cart?void 0:cart.token)){requestId=null==gkCartTokenReqId?void 0:gkCartTokenReqId.requestId;const body={...shopify_session_id&&{shopifySessionId:shopify_session_id},merchantDomain:window.location.origin,...window.gkMerchantId&&{mid:window.gkMerchantId},cart:cart,requestId:requestId};await callPostRequestApi(body,cart)}else{gkDeleteCookie("gkCartTokenReqId");const body={...shopify_session_id&&{shopifySessionId:shopify_session_id},merchantDomain:window.location.origin,...window.gkMerchantId&&{mid:window.gkMerchantId},cart:cart};await callPostRequestApi(body,cart)}!hideIframe&&skipRequest&&window.closeGokwikSideCart&&window.closeGokwikSideCart(),analyticsEvent({eventType:"onGkClick",merchantDomain:window.gkShopDomain||"NA",merchantId:window.gkMerchantId||"NA",name:"checkout_initiated",type:"event",shopifySessionId:getShopifySessionId(),data:{source:"shopify_app",checkout_ui_type:"new"}}),gkFailSafe||gkNativeRedirection||(function(requestId2,checkoutClickTime,hideIframe=!1){sessionStorage.setItem("gkRequestId",requestId2);let url="https://pdp.gokwik.co/sa-login-ui/gk_sa_login.html?reqId="+requestId2;const kp_email=localStorage.getItem("kp_email");kp_email&&(url=url+"&kpe="+kp_email);const discountCode=getGkDiscountCode();discountCode&&(url=url+"&cd="+discountCode);const merchantTokens=getGkCookieArray("KWIKSESSIONTOKEN");(null==merchantTokens?void 0:merchantTokens.length)>0&&(url=url+"&jwt_token="+merchantTokens.join(","));checkoutClickTime&&(url=url+"&click_time="+checkoutClickTime);hideIframe&&(url=url+"&checkoutOnCart="+hideIframe);url+="&sd="+encodeURIComponent(window.gkShopDomain);const adSource=window.location.href.split("?").length>1?window.location.href.split("?")[1]:void 0;url+="&source="+adSource,gkIframe=document.querySelector("#gk-iframe"),gkIframe||createIframe();gkIframe=document.querySelector("#gk-iframe"),gkIframe.src=url,gkModal.style.display=hideIframe?"none":"block",gkModal.firstElementChild.style.display=hideIframe?"none":"flex",gkIframe.onload=function(){let gkLoaderAnimation=document.querySelector(".gk-loader-animation");gkLoaderAnimation&&(gkLoaderAnimation.style.display="none")}}(requestId,checkoutClickTime,hideIframe),function(button){button&&button.classList.remove("checkout-btn-loader")}(button)),analyticsEvent({eventType:"onGkClick",merchantDomain:window.gkShopDomain||"NA",merchantId:window.gkMerchantId||"NA",name:"gokwik-button-clicked",type:"event",shopifySessionId:getShopifySessionId()})}window.initiateLogin=initiateLogin;const getGkCookieArray=cname=>{let name=cname+"=",ca=document.cookie.split(";"),cookies=[];for(let i=0;i<ca.length;i++){let c=ca[i].trim();c.startsWith(name)&&cookies.push(c.substring(name.length))}return cookies};function setGkCookie(cname,cvalue,exdays){try{const d=new Date;d.setTime(d.getTime()+24*exdays*60*60*1e3);let expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+";"+expires+";path=/"}catch(error){console.log(error)}}function getGkCookie(cname){const name=cname+"=",cookies=document.cookie.split(";").map(cookie=>cookie.trim());for(const cookie of cookies)if(cookie.startsWith(name))return cookie.substring(name.length);return""}const autoReadOtp=async()=>{if("OTPCredential"in window){analyticsEvent({merchantDomain:window.gkShopDomain||"NA",merchantId:window.gkMerchantId||"NA",requestId:requestId,shopifySessionId:getShopifySessionId(),eventType:"click",name:"auto_read_otp_shown",type:"function"});const signal=new AbortController;let o={otp:{transport:["sms"]},signal:signal.signal};try{let body={type:"prefillOtp",data:(await navigator.credentials.get(o)).code};gkIframe.contentWindow.postMessage(body,"https://pdp.gokwik.co"),signal.abort()}catch(e){console.error("Error AUTO READ OTP:",e),signal.abort()}}else console.log("CANT READ OTP")},checkTrueCallerApp=async requestId2=>new Promise(resolve=>{const trueCallerRequestId="trc-"+requestId2;window.location.href=`truecallersdk://truesdk/web_verify?type=btmsheet&requestNonce=${trueCallerRequestId}&partnerKey=8mf4fc98b53b622d94edc87c225d6096325f8&partnerName=Gokwik&lang=en&skipOption=useanothernum&ctaPrefix=continuewith&btnShape=rect&ctaColor=%23000000"`,setTimeout(()=>{document.hasFocus()?resolve(null):resolve(trueCallerRequestId)},600)});async function onMessageGk(e){var _a,_b;try{const details="string"==typeof(null==e?void 0:e.data)?JSON.parse(null==e?void 0:e.data):null==e?void 0:e.data;if("gk-checkout-loaded"===(null==details?void 0:details.type)){let gkLoaderAnimation=document.querySelector(".gk-loader-animation");gkLoaderAnimation&&(gkLoaderAnimation.style.display="none"),gkIframe.contentWindow.postMessage({type:"set-gk-data",cart:gk_checkout_enhancer_cart,currentMerchantUrl:window.location.origin,completeUrl:window.location.href,orig_referrer:document.referrer},"*")}if("delete_jwt_token"===(null==details?void 0:details.type)&&gkDeleteCookie("KWIKSESSIONTOKEN"),"updateSkipCheckout"===(null==details?void 0:details.type)&&(skipCheckoutNoToken=details.skipCheckoutNoToken),"close-gkModal"===(null==details?void 0:details.type)&&function(){document.body.style.overflow="scroll";let iosSafari=checkIfSafari();iosSafari&&document.body.style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("height"),iosSafari&&document.querySelector("html").style.removeProperty("overflow"),iosSafari&&document.getElementById("iOSViewPort")&&document.getElementById("iOSViewPort").remove();let gkCheckoutPageIframe=document.querySelector(".checkout-page-iframe");gkCheckoutPageIframe&&closeCheckoutPageIframe(gkCheckoutPageIframe),gkModal.style.display="none",gkIframe.contentWindow.postMessage({type:"close-gokwik-iframe",gkModalDisplay:"none"},"https://pdp.gokwik.co")}(),"guest-checkout"===(null==details?void 0:details.type)&&(window.location.href=null==details?void 0:details.url),"redirectToCheckout"===(null==details?void 0:details.type)&&(localStorage.getItem("__ui")&&localStorage.removeItem("__ui"),(null==details?void 0:details.hideCheckoutOnReturn)&&sessionStorage.setItem("hideCheckoutOnReturn","true"),iFrameCleanup(null==details?void 0:details.hideCheckoutOnReturn),window.location.href=details.checkoutUrl||"/checkout?"+(getGkDiscountCode()?"discount="+getGkDiscountCode()+"&":"")),"redirectToCheckout-multipass"===(null==details?void 0:details.type)){(null==details?void 0:details.hideCheckoutOnReturn)&&sessionStorage.setItem("hideCheckoutOnReturn","true");const discountCode=getGkDiscountCode();if(iFrameCleanup(null==details?void 0:details.hideCheckoutOnReturn),window.gkCustomerEmail)window.location.href="/checkout?"+(discountCode?"discount="+discountCode+"&":"");else{const multipassParams=null==(_a=null==details?void 0:details.multipass)?void 0:_a.split("/account")[1],fetchurl=window.location.origin+"/account"+multipassParams;fetch(fetchurl,{method:"GET",headers:{"Content-Type":"application/json"}}).finally(()=>{window.location.href="/checkout?"+(discountCode?"discount="+discountCode+"&":"")})}}if("redirectToCheckout-cookieAddressRedirection"===(null==details?void 0:details.type)&&((null==details?void 0:details.hideCheckoutOnReturn)&&sessionStorage.setItem("hideCheckoutOnReturn","true"),iFrameCleanup(null==details?void 0:details.hideCheckoutOnReturn),window.location.href=details.checkoutUrl||"/checkout?"+(getGkDiscountCode()?"discount="+getGkDiscountCode()+"&":"")),"redirectToShopifyCheckout"===(null==details?void 0:details.type)&&((null==details?void 0:details.hideCheckoutOnReturn)&&sessionStorage.setItem("hideCheckoutOnReturn","true"),iFrameCleanup(null==details?void 0:details.hideCheckoutOnReturn),window.location.href=window.location.origin+"/checkout"),"redirectToCheckout-cartParamLink"===(null==details?void 0:details.type)&&((null==details?void 0:details.hideCheckoutOnReturn)&&sessionStorage.setItem("hideCheckoutOnReturn","true"),iFrameCleanup(null==details?void 0:details.hideCheckoutOnReturn),await updateCartShipping(null==details?void 0:details.selectedShipping,null==details?void 0:details.requestId),window.location.href=details.checkoutUrl||"/checkout?"+(getGkDiscountCode()?"discount="+getGkDiscountCode()+"&":"")),"popup-display-change"===(null==details?void 0:details.type)&&gkIframe.contentWindow.postMessage({type:"popup-display-change",gkModalDisplay:"block"},"https://pdp.gokwik.co"),"saveToken"===(null==details?void 0:details.type)&&setGkCookie("KWIKSESSIONTOKEN",null==details?void 0:details.token,365),"autoReadOtp"===(null==details?void 0:details.type)&&(console.log("AUTO READ OTP MESSAGE RECEIVED"),autoReadOtp()),"gk-logout"===(null==details?void 0:details.type)&&(setGkCookie("KWIKSESSIONTOKEN","","0"),localStorage.removeItem("KWIKSESSIONTOKEN")),"showTrueCallerPopup"===(null==details?void 0:details.type))try{const trcRequestId=await checkTrueCallerApp(null==(_b=null==details?void 0:details.data)?void 0:_b.requestId);trcRequestId&&gkIframe.contentWindow.postMessage({type:"trueCallerVerification",trcRequestId:trcRequestId},"https://pdp.gokwik.co")}catch(error){console.log(error,"truecaller error")}if("foreignAnalytics"===(null==details?void 0:details.type)&&callAnalyticsService(null==details?void 0:details.service,null==details?void 0:details.eventName,null==details?void 0:details.data),"update-checkout-called"===(null==details?void 0:details.type)){let gkCheckoutiframe=document.createElement("iframe");gkCheckoutiframe.classList.add("checkout-page-iframe"),gkCheckoutiframe.src=null==details?void 0:details.checkoutUrl,gkCheckoutiframe.style.width="1px",gkCheckoutiframe.style.height="1px",gkCheckoutiframe.style.border="none",document.body.appendChild(gkCheckoutiframe),setTimeout(()=>{gkCheckoutiframe.src="about:blank",gkCheckoutiframe.remove()},3e3)}}catch(e2){console.log(e2)}}const updateCartShipping=async(shipping,requestId2)=>{var formData=new FormData;formData.append("attributes[requestId]",requestId2);try{return await fetch("/cart/update.js",{method:"POST",body:formData})}catch(error){return analyticsEvent({eventType:"event",merchantDomain:window.gkShopDomain||"NA",merchantId:window.gkMerchantId||"NA",name:"shipping-update-failed",type:"event",shopifySessionId:getShopifySessionId(),requestId:requestId2}),console.log(error),error}},updateExperimentAttributes=async(gkExpCustomerId2,variantName,merchantId)=>{var formData=new FormData;formData.append("attributes[expCustomerId]",gkExpCustomerId2),formData.append("attributes[variantName]",variantName),formData.append("attributes[merchantId]",merchantId);try{return await fetch("/cart/update.js",{method:"POST",body:formData})}catch(error){return console.log(error),error}},gkframeCss=".gk-modal {\n  display: none;\n  position: fixed;\n  z-index: 100000;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n\n.gk-modal-content {\n  height: 90dvh;\n  max-height: 767px;\n  overflow: hidden;\n  position: absolute;\n  width: 450px;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  margin: 0 !important;\n  border-radius: 8px;\n  box-sizing: border-box;\n}\n\n.gk-close {\n  color: #aaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold;\n  cursor: pointer;\n  position: absolute;\n  top: 20px;\n  right: 20px;\n}\n\n.gk-close:hover,\n.gk-close:focus {\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n}\n\n/* Modal footer styles */\n.gk-modal-footer {\n  text-align: center;\n  margin-top: 20px;\n}\n\n/* Button styles */\n#gk-open-modal-btn {\n  background-color: #4caf50;\n  color: white;\n  padding: 10px 20px;\n  border: none;\n  cursor: pointer;\n  font-size: 16px;\n  border-radius: 40px;\n}\n\n#gk-open-modal-btn:hover {\n  background-color: #45a049;\n}\n\n.gk-login {\n  width: 100%;\n  border: none;\n  height: 100%;\n}\n\n.gk-loader {\n  position: relative;\n  top: 280px;\n  transform: translate(-50%, -50%);\n  border: 8px solid #f3f3f3;\n  border-top: 8px solid #5f248d;\n  border-radius: 50%;\n  width: 50px;\n  height: 50px;\n  animation: gk-spin 2s linear infinite;\n  display: block;\n}\n\n.gk-otp-popup {\n  display: none;\n  height: 100%;\n}\n\n@keyframes gk-spin {\n  0% {\n      transform: rotate(0deg);\n  }\n\n  100% {\n      transform: rotate(360deg);\n  }\n}\n\n@media only screen and (max-width:676px) {\n  .gk-modal-content {\n    height: 100dvh !important;\n    width: 100vw !important;\n    max-height: 100dvh;\n    max-width: 100vw;\n    overflow: hidden !important;\n    margin: 0;\n    border-radius: 0;\n    position: fixed; \n    top: 0; \n    left: 0; \n    transform: none;\n  }\n}\n\n.checkout-btn-loader {\n  position: relative;\n  pointer-events: none;\n  opacity: 0.7;\n}\n\n.checkout-btn-loader::after {\n  content: '';\n  position: absolute;\n  top: 35%; /* Vertically align the loader */\n  left: 45%; /* Horizontally align the loader */\n  width: 16px;\n  height: 16px;\n  border: 2px solid white;\n  border-top-color: transparent;\n  border-radius: 50%;\n  animation: spin 0.8s linear infinite;\n  transform: translate(-50%, -50%);\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n",callAnalyticsService=(service,eventName,data)=>{switch(service){case"contlo":fireContloEvent(eventName,data);break;case"fb":fireFbEvent(eventName,data);break;case"ga4":fireGa4Event(eventName,data);break;case"webEngage":((eventName,data)=>{commonAnalyticsData$1=null==data?void 0:data.commonAnalyticsData,"phone_number_entered"===eventName?webengagePhoneNumberEntered(data):"otp-verified-gk"===eventName?webengageOtpVerifiedEvent(data):"userLoginEvent"===eventName?webengageUserLoginEvent(data.cart):"phoneNumber"===eventName?webengagePhoneNumberEvent({phone:null==data?void 0:data.phone,checkoutUrl:null==data?void 0:data.checkoutUrl}):"userAddress"===eventName?webengageUserAddressEvent({...data,eventName:eventName}):"pinCode"===eventName?webengagePinCodeEvent(null==data?void 0:data.pincode):"user_login_gk"===eventName&&webengageCustomGKUserLoginEvent(data)})(eventName,data);break;case"moengage":((eventName,data)=>{commonAnalyticsData$2=null==data?void 0:data.commonAnalyticsData,moengageGKCart=null==data?void 0:data.moengageGKCart,merchantInfoObj=null==data?void 0:data.merchantInfo,"OTP_login"===eventName?moengageOtpLoginEvent(eventName,data):"startedCheckout"===eventName?moengageStartedCheckoutEvent():"mobileAdded"===eventName?moengageMobileAddedEvent({phone:null==data?void 0:data.phone}):"userAddress"===eventName?moengageUserAddressEvent(data):"createUserAddress"===eventName?moengageCreateUserAddressEvent(data):"pincodeAdded"===eventName&&moengagePincodeAddedEvent(data)})(eventName,data);break;case"clevertap":((eventName,data)=>{commonAnalyticsData=null==data?void 0:data.commonAnalyticsData,"checkoutStarted"===eventName?clevertapCheckoutStartedEvent():"phoneNumber"===eventName?clevertapPhoneNumberEvent(data):"mobileAddedGK"===eventName?clevertapMobileAddedGKEvent({phone:null==data?void 0:data.phone,checkoutUrl:(null==data?void 0:data.checkoutUrl)||""}):"pinCode"===eventName?clevertapPinCodeEvent(data):"userAddress"===eventName&&(data.eventName=eventName,clevertapUserAddressEvent(data))})(eventName,data)}},fireGa4Event=(eventName,data)=>{"phone_number_entered"===eventName?ga4MobileNumberEntered(data):"otp-verified-gk"===eventName&&ga4OtpVerifiedEvent(data)},ga4MobileNumberEntered=data=>{var _a;let gkDataObj={mobile_number:data.phoneNumber,currency:"INR",tag:"GoKwik",cart_total_price:(parseInt(null==(_a=null==data?void 0:data.cart)?void 0:_a.original_total_price)/100).toFixed(2),items:createItemsBody(data.cart)};window.gtag("event","Mobile_Added_GK",gkDataObj)},ga4OtpVerifiedEvent=data=>{var _a;let gkDataObj={mobile_number:data.phoneNumber,currency:"INR",tag:"GoKwik",cart_total_price:(parseInt(null==(_a=null==data?void 0:data.cart)?void 0:_a.original_total_price)/100).toFixed(2),items:createItemsBody(data.cart)};window.gtag("event","OTP_Verified_GK",gkDataObj)},createItemsBody=cart=>cart.items.map(item=>{var _a;return{product_id:item.product_id||"NA",product_variant_id:item.variant_id,product_name:item.title,product_variant:item.variant_title||"NA",product_quantity:item.quantity,product_url:item.url,product_image_url:item.image,product_price:+item.final_price/100,coupon:(null==(_a=null==item?void 0:item.discounts[0])?void 0:_a.title)||"NA"}}),fireFbEvent=(eventName,data)=>{"init-checkout"===eventName&&initCheckout(data)},initCheckout=data=>{var _a,_b,_c,_d,_e,_f;console.log("Fb Pixel==>","track","beginCheckout",{currency:"INR",tag:"GoKwik",cart_total_price:(parseInt(null==(_a=null==data?void 0:data.cart)?void 0:_a.original_total_price)/100).toFixed(2),items:null==(_c=null==(_b=data.cart)?void 0:_b.items)?void 0:_c.map(item=>{var _a2;return{product_id:item.product_id||"NA",product_variant_id:item.variant_id,product_name:item.title,product_variant:item.variant_title||"NA",product_quantity:item.quantity,product_url:item.url,product_image_url:item.image,product_price:+item.final_price/100,coupon:(null==(_a2=null==item?void 0:item.discounts[0])?void 0:_a2.title)||"NA"}})},{eventID:`Gokwik ${Math.random()}`}),fbq("track","beginCheckout",{currency:"INR",tag:"GoKwik",cart_total_price:(parseInt(null==(_d=null==data?void 0:data.cart)?void 0:_d.original_total_price)/100).toFixed(2),items:null==(_f=null==(_e=data.cart)?void 0:_e.items)?void 0:_f.map(item=>{var _a2;return{product_id:item.product_id||"NA",product_variant_id:item.variant_id,product_name:item.title,product_variant:item.variant_title||"NA",product_quantity:item.quantity,product_url:item.url,product_image_url:item.image,product_price:+item.final_price/100,coupon:(null==(_a2=null==item?void 0:item.discounts[0])?void 0:_a2.title)||"NA"}})},{eventID:`Gokwik ${Math.random()}`})},fireContloEvent=(eventName,data)=>{"phone_number_entered"===eventName&&phoneNumberEnteredEvent(data)},phoneNumberEnteredEvent=data=>{var _a,_b;let dataObj={eventName:"mobile_added_gk",data:createBody(data)};null==(_b=window.contlo)||_b.sendEvent(dataObj.eventName,null==(_a=null==dataObj?void 0:dataObj.data)?void 0:_a.phoneNumber,dataObj.data)},createBody=data=>{var _a,_b,_c;let productIds=[];return null==(_b=null==(_a=null==data?void 0:data.cart)?void 0:_a.items)||_b.map(product=>{productIds=[...productIds,`${product.id}`]}),{tag:"GoKwik",cart_total_price:null==(_c=null==data?void 0:data.cart)?void 0:_c.original_total_price,product_id:productIds||[],first_name:"",last_name:"",email:"",full_address:"",city:"",state:"",address_type:"",shipping_method:"",abc_url:"",pincode:"",...data}},getShopifySessionId=()=>{const sessionId=window.gkShopifySessionId||getGkCookie("_shopify_s");return sessionId&&null!=sessionId?sessionId:""};
